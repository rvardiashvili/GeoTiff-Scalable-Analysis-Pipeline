# @package _global_
model:
  # This section is for information, the adapter handles loading
  name: "Prithvi-100M-flood-segmentation"
  
  # Adapter configuration
  adapter:
    path: "eo_core.adapters.prithvi_adapter"
    class: "PrithviAdapter"
    params:
      model_name_or_path: "ibm-nasa-geospatial/Prithvi-EO-1.0-100M-sen1floods11"
      model_filename: "sen1floods11_Prithvi_100M.pth"
      # local_checkpoint_path: "/path/to/your/Prithvi_100M.pth" # Optional: specify a local path to the checkpoint      
      # Prithvi requires 6 bands: Blue, Green, Red, Narrow NIR (B8A), SWIR 1, SWIR 2
      bands: ['B02', 'B03', 'B04', 'B8A', 'B11', 'B12']
      
      # Normalization stats from sen1floods11_Prithvi_100M.py
      means: [0.14245495, 0.13921481, 0.12434631, 0.31420089, 0.20743526, 0.12046503]
      stds: [0.04036231, 0.04186983, 0.05267646, 0.0822221, 0.06834774, 0.05294205]
      
      # Prithvi expects 224x224 input
      patch_size: 224
      stride: 112 # Overlap for segmentation
      
      batch_size: 8
      
      backbone_params:
        img_size: 224
        patch_size: [1, 16, 16]
        num_frames: 1
        in_chans: 6
        embed_dim: 768
        depth: 12
        num_heads: 12
        mlp_ratio: 4.0
        
      head_params:
        in_channels: 768
        channels: 256
        num_classes: 2
      
      # Normalization (handled by AutoImageProcessor if available, otherwise we pass stats)
      # We will try to use AutoImageProcessor in the adapter

pipeline:
  output:
    save_gradient_preview: true

